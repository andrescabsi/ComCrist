<!-- jQuery -->
<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>

<!-- Underscore -->
   <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.5.1/underscore-min.js"></script>


<p class="breadcrumbspublicaciones"><strong>Usted está aquí:</strong><a href="/">Inicio</a> |  {tag_nombre categoria:}  |  <span>{module_breadcrumbs}</span></p>


<section class=" sections subcategorias-columna-A">

    <h2 class="h2">{tag_nombre categoria:}</h2>
    <ul>
        {module_webapps,17486,c,{tag_codigo subcategoria},,,,100000,,1}
    </ul>

    <h2 class="h2">Estado</h2>
    <ul>
        <li>Mostrar todos</li>
        <li>Nuevo</li>
        <li>Usado</li>
    </ul>

    <h2 class="h2">Ciudad</h2>
    <ul>
        <li>Todas las ciudades</li>
    </ul>


    <div class="subcategorias-pauta">
        {module_webapps,17438,c,{tag_pauta lateral},,_blank,,100000,true,1}
    </div>
</section>

<section class="sections subcategorias-columna-B">
    <section class="subcategorias-contenido">
        <div class="subcategoria-nombre">
            <h1 class="h1 linea anchototal">Crecimiento</h1>
            <div class="subcategorias_titulo_ppal">
                <p style="display: inline-block;">Publicaciones: 1 de {module_webappscount,16641,c,{tag_codigo subcategoria}} &nbsp;|&nbsp;</p>
                <img class="boton-cuadro" id="btn-cuadro" src="/Imagenes/iconos/Vista2.png" alt="Vista Cuadro" height="10" width="10" />
                <img class="boton-listado" id="btn-listado" src="/Imagenes/iconos/Vista1.png" alt="Vista Listado" height="10" width="10" />
                <select name="Organizar" id="listado_organizar_publicaciones">
                    <option id="listado_organizar_publicaciones_recientes" value="">Más recientes</option>
                    <option id="listado_organizar_publicaciones_menorp" value="">Menor Precio</option>
                    <option id="listado_organizar_publicaciones_mayorp" value="">Mayor Precio</option>
                    <option id="listado_organizar_publicaciones_mayorp" value="">Órden Alfabético</option>
                </select>
                <!--<p style="display: inline-block;">| &nbsp;&Uacute;ltimas Publicaciones <span style="font-size: 11px;">▼</span></p>-->
            </div>
            <div>
                <ul id="container-publicaciones" class="contenedor_publicaciones_underscore">
                    <!-- AQUI SE IMPRIME LAS PUBLICACIONES -->
                </ul>
            </div>
        </div>
    </section>
    <section class="subcategorias-publicidad-horizontal">
        
    </section>
</section>


<!-- PLANTILLA CUADRO -->
<script type="text/template" id="cuadro-template">

    <% _.each(list,function(item){  %>
        <li class="contenedor_publicaciones_listado">
            <div class="contenido_publicaciones_listado">

                <div class="contenedortitulo_publicaciones_listado">
                    <div class="contenedortitulo1_publicaciones_listado">
                        <p class="titulo_publicaciones_listado"><a href="<%-item.enlace%>"><%-item.nombre%></a></p>
                    </div>
                </div>
                
                <div class="contenedorimagen_publicaciones_listado">
                    <a href="<%-item.enlace%>"><img class="imagen_publicaciones_listado" src="<%-item.imagen%>?Action=thumbnail&Width=160&Height=150&algorithm=fill_proportional"></a>
                </div>

                <div class="contenedorautor_publicaciones_listado">
                    <span class="autor_publicaciones_listado"><%-item.estado%></span>
                    <span class="fecha_publicaciones_listado"><%-item.ulactualizacion%></span>
                </div>

                <div class="contenedorprecio_publicaciones_listado">
                    <span data-a-sign="$" data-m-dec="0" vMax="999999999" data-a-dec="," data-a-sep="." class="currency-interno precioahora_publicaciones_listado"><%-item.precio%></span>
                    <span class="ciudad_publicaciones_listado"><%-item.ciudad%></span>
                </div>

                <div class="contenedorboton_publicaciones_listado">
                    <a href="<%-item.enlace%>"><button class="vermas_publicaciones_listado">Ir</button></a>
                </div>

            </div>
        </li>
    <% }) %>

</script>
<!-- /PLANTILLA CUADRO -->

<!-- PLANTILLA LISTADO -->
<script type="text/template" id="listado-template">

    <% _.each(list,function(item){  %>
        <li class="contenedor_publicaciones_listado">
            <div class="contenido_publicaciones_listado">

                <div class="contenedortitulo_publicaciones_listado">
                    <div class="contenedortitulo1_publicaciones_listado">
                        <p class="titulo_publicaciones_listado"><a href="<%-item.enlace%>">Listado<%-item.nombre%></a></p>
                    </div>
                </div>
                
                <div class="contenedorimagen_publicaciones_listado">
                    <a href="<%-item.enlace%>"><img class="imagen_publicaciones_listado" src="<%-item.imagen%>?Action=thumbnail&Width=160&Height=150&algorithm=fill_proportional"></a>
                </div>

                <div class="contenedorautor_publicaciones_listado">
                    <span class="autor_publicaciones_listado"><%-item.estado%></span>
                    <span class="fecha_publicaciones_listado"><%-item.ulactualizacion%></span>
                </div>

                <div class="contenedorprecio_publicaciones_listado">
                    <span data-a-sign="$" data-m-dec="0" vMax="999999999" data-a-dec="," data-a-sep="." class="currency-interno precioahora_publicaciones_listado"><%-item.precio%></span>
                    <span class="ciudad_publicaciones_listado"><%-item.ciudad%></span>
                </div>

                <div class="contenedorboton_publicaciones_listado">
                    <a href="<%-item.enlace%>"><button class="vermas_publicaciones_listado">Ir</button></a>
                </div>

            </div>
        </li>
    <% }) %>

</script>
<!-- /PLANTILLA LISTADO -->



<!-- SCRIPT UNDERSCORE -->
<script>
    
    var list = [{module_webapps,16641,c,{tag_codigo subcategoria},,,,1000,,1 template="/ModuleTemplates/Webapps/Publicaciones/json.tpl"}];

    /* FILTROS
    **************************************************************************************/

    //Mostrar los elementos aleatorios
    //list = _.shuffle(list);
    
    //Solo muestra la ciudad en la clave
    //list = _.where(list,{"ciudad":"Bogota"});
    
    //Solo muestra los Nuevo - Usado
    //list = _.where(list,{"estado":"Usado"});

    //Solo muestra los que tiene precio entre 0 y 10000
    //list = _.filter(list,function(item){
        //if( (item.precio > 0) && (item.precio < 10000) ) return true;
    //});

    //Organizar por órden alfabetico
    //list = _.sortBy(list,function(item){
        //return item.nombre;
    //});

    //Organizar por nuevo a usado
    //list = _.sortBy(list,function(item){
        //return item.estado;
    //});

    //Organizar por precio de menor a mayor
    //list = _.sortBy(list,function(item){
        //return item.precio;
    //});

    //Organizar por precio de mayor a menor
    list = _.sortBy(list,function(item){
        return -item.precio;
    });

    /* IMPRIMIR LOS RESULTADOS Y SELECTOR DE PLANTILLAS
    **************************************************************************************/

    var template = _.template($("#cuadro-template").html()); // Apunta a la plantilla
    $(".contenedor_publicaciones_underscore").html(template); // Imprime en Div

    //Cuadro
    $("#btn-cuadro").click(function(){
        var template = _.template($("#cuadro-template").html()); // Apunta a la plantilla
        $(".contenedor_publicaciones_underscore").html(template); // Imprime en Div
    });

    //Listado
    $("#btn-listado").click(function(){
        var template = _.template($("#listado-template").html()); // Apunta a la plantilla
        $(".contenedor_publicaciones_underscore").html(template); // Imprime en Div
    });

</script>
<!-- /SCRIPT UNDERSCORE -->